# This workflow will run tests using node and then publish a package to GitHub Packages when a release is created
# For more information see: https://docs.github.com/en/actions/publishing-packages/publishing-nodejs-packages

name: Node.js Package

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 16
      - run: npm i

  publish-npm:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Server
        run: |
          ssh root@45.153.69.67 'cd /test-server/test-repo && git pull origin main && npm install && node app.js'
        env:
          SSH_PRIVATE_KEY: ${{ -----BEGIN OPENSSH PRIVATE KEY-----b3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABDx8pQXdGgy9KDu7d/VvZ5oAAAAEAAAAAEAAAGXAAAAB3NzaC1yc2EAAAADAQABAAABgQC/+7ecDCQafmVZZX63be1tyJBhRjfOW6Sit/QalZTkPIGStw0wGM/wQD3muFaQT0E4tjkb7vz8KqB7YB3PYqanjYQS1cX2vHR78K6oB/cwT2m6GOYXnlrycZXjscYY703KqtYqwy9EOdJ5BW8nzWXOcg2qGGaG4hUPTk0R+5gZjFJPAeNXDHzq+nc/pdLXUfzxMoUDlGsq0HHDf4YyrrKgKOo/ARkCVFtBm/Ds4rV4x0pv9HXLCQ/Vj4CP1b7teaTb/OtniDLDAKnRyBg8aXrGoe2hxQLBj/jiapRCzPrdKjNZ1rSSEa61gCmP6NdiIOEZXy7X4IEJkpNmhYGRzbBeB9hoVwKNMkLN8JMw8GYBYnrmKvCGrQExg5CuWGP956VyPygpZkCYBANyUyMlQeG1w3a5G0kkKYU1P5welVIymzLHrcO6WCy2Ie4f12Yh27fM+mb9Xh+/CtMOYL/1pu/C5e9+INXcDIAa4Wg+JWfsuTyZw8Jq/a2EKCFPL4jUEGsAAAWgO5rUXJnqViljALfwkJ6Q1LQwaGv7nKTU8eYGHZDKSG+GPEJupVHGEcbI+6p2s2Gx+6N4xM9Zc4ZGkwz6eoLYmWXM92csyW1yxOfZeXuyY4I5GwcYSO4c2jDqYEq/0clBlqYhgo4DxO/P5c9627kXYGeF0vhq5ZflbGd2Ltvj1kLx5AVte8ytzvRCP9rkED9Mk0Va+t68IeXCgpi98+vVGg4Ac6hJBxB1eRh8PBYGyVgDMoIVr4vo1qCOfCqcUUTyI1ooB8XyLRN5Sky5mIpwRVjeJMhfaPtAucMdlSWUWKSb/hEZLTYHzP36rTGhZKb12jYrSclzQX/q/vPLeAFBaWsuy+/ne3k/AhOOw0c4coLVlRYUCCd5c3VZ3XJ5ALnMpafz9TqdHw8KxVlcWNCeGBcdqTikSym8dFZrg7S5pi2lJ1lfJ+hruif5PtfewtB3t47IBeSKiSGkLrvr13HN++zPx5qFKj5pmeGXglvOIepGZj2M9Q3rXe95F18NcOYFbi3INyAeNdXhAdqus4AgUyNmGg5KZXfMBpCvxYltfEmD//Qts+c9zgsmoj8polBhBqzrZ0wrJS0KJoKf4CuOWgYZGmY2V2MS2srKknf8AMwG+dT5jJQq89HZfD8ORNLkNQJ8bzFaeRhb89dykL7CTr1xf6aDEQ/NhdbYVGLCTftHjZA2g8pqdYzryNgxWttNHIOhWW7nmnGPjEkoD5o8q2eCQaA/mR8SDDaH4toXlaS/x5hccorjf2/tDg6jklVPk6Oxts38XSZ6VbOUz/eCV1+ofF6dTWW17iU2ACUAZaE+yg2etF5GQuI7u0+u9uLLFq/tI0jLHCtI1HQSuwRT1TqYG4CvMQyS3LGbs48y9yeG62V2IxhQq3w2/6tlxQ5FEWOaplH8lpuqzd8PHpCnBi4F+wLv8aRnNWXP4BGUYyVGkA8Cq6Xygt9i7Mg/ELrVQ9BIXo6sqyDHfbSwkULDlv+FrcHIDnmE5QEuD/ESX9XHp94TPh7oKH7NIAst0ACPe53N+8WrP6o7nJkbMKOmi31/621GPIDrbwspCYgexqYanjFq9fh4lOcAlo3bpJAJH5HGmJLg6b52njFjpnTJIldFJMlXqXKvTA2qLa6Qsh6MzZVFPcRE4cnburPkIVATzUAVR55CDop63uCZ8e4Pj06sqk9Vcb4QqSWYEvc0BYz0cLJlmveM78vVx/N2BWSJ+QM9rU1qrwJk+dNnhG5CbmxMmx1IcQqGhdu2HJsCEln+up6SC5Ix6sCZmBB8xQqvZMBSfRYkICmXQyvONAicjR1aVjmcbx2/8Q2rs1R8J0c/pYpLcQjQ65xNnWj1m95ntMR738UL18lOzXQ5QwEIwMkpqnTiXPe3HoL6giTYQv6KDb/dz35rs+4oABLXFQzbs+FdFDUfqwSAfHmOq2sP2bOiPN358mzPnhLaaJjsPwgZWzORWj2PlAGzKUzFhdI45P3yRrSvy/aQWZbb/Men7rYsiPrJMjYc2IwWFlpW1BdQAkBRIUqBih/y0+6+6qkdVK2DYvXLISipi3X1RV6P8eJ/N7H20b+IGE8OGhC8dgpeHzrnNaQKfCTBk+SwrFjfvK0lBGHkcqywZbD4ajqCNipifgcRTrBng7iF3zjoAPfLCuN0vXHAyjWCzVp6ZRFDNvSQ1UD68ezm+2NwCRuxV3I5pEeIUfX9gABfvcYYWGEDmIxGvutIsE/vatNimfUaPeT8UPQn15k/cXQXYD/ZrOKf08v0K7ekRpn3xvEvaGzDI2FTlmagVIejwvBxFljfKN8CzjI0DhXyWTEs1OoWQtBllplyMdxl+xuxDw2C8BWOMb9EIJTLtDDUMBOo3Ou8IPjke+eVXQ9jk0U6OU/uL2sqDyUY4pAJTrCmCtmBaJ/K2VmHZvvpJG1DABHU3oHD-----END OPENSSH PRIVATE KEY----- }}
